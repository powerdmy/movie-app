webpackJsonp([1],{"3L/v":function(t,e){},"4uMW":function(t,e){},DXmm:function(t,e){},FNDx:function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("7+uW"),n=new s.a,a={name:"m-header",props:{title:{type:String,default:"电影APP"},backshow:{type:Boolean,default:!1}},data:function(){return{searchShow:!1,searchText:""}},methods:{clearText:function(){n.$emit("setTitle","搜索"+this.searchText),this.searchShow=!1,this.searchText=""}}},o={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"header"},[i("header",[t.backshow?i("i",{staticClass:"iconfont icon-fanhui",on:{click:function(e){t.$router.back()}}}):t._e(),t._v("  "+t._s(t.title)+" "),i("i",{staticClass:"iconfont icon-sousuo",on:{click:function(e){t.searchShow=!t.searchShow}}})]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.searchShow,expression:"searchShow"}],staticClass:"search-wrap"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],staticClass:"search-input",attrs:{type:"text",placeholder:"请输入"},domProps:{value:t.searchText},on:{input:function(e){e.target.composing||(t.searchText=e.target.value)}}}),t._v(" "),i("div",{staticClass:"btn",on:{click:t.clearText}},[i("router-link",{attrs:{to:{name:"search",query:{q:t.searchText}}}},[t._v("搜索")])],1)])])},staticRenderFns:[]};var r={name:"mTabbar",methods:{setTitle:function(t){n.$emit("setTitle",t)}}},c={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tabbar"},[i("div",{staticClass:"router-link-wrap",on:{click:function(e){t.setTitle("正在热映")}}},[i("router-link",{attrs:{to:"/hotlist"}},[i("i",{staticClass:"iconfont icon-bofang"}),t._v(" "),i("p",[t._v("正在热映")])])],1),t._v(" "),i("div",{staticClass:"router-link-wrap",on:{click:function(e){t.setTitle("排行榜")}}},[i("router-link",{attrs:{to:"/rank"}},[i("i",{staticClass:"iconfont icon-paixingbang"}),t._v(" "),i("p",[t._v("排行榜")])])],1)])},staticRenderFns:[]};var l={name:"App",components:{mHeader:i("VU/8")(a,o,!1,function(t){i("zQxV")},null,null).exports,mTabbar:i("VU/8")(r,c,!1,function(t){i("jS+s")},null,null).exports},data:function(){return{title:"正在热映",backshow:!1}},created:function(){var t=this;n.$on("setTitle",function(e){t.title=e}),n.$on("backshow",function(e){t.backshow=e})}},m={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("m-header",{attrs:{title:this.title,backshow:this.backshow}}),this._v(" "),e("div",{staticClass:"router-view"},[e("router-view")],1),this._v(" "),e("m-tabbar")],1)},staticRenderFns:[]};var v=i("VU/8")(l,m,!1,function(t){i("NSg2")},null,null).exports,u=i("/ocq"),f={name:"star",props:{size:{type:String},score:{type:Number}},computed:{starType:function(){return"star-"+this.size},itemClasses:function(){for(var t=[],e=this.score/2,i=Math.floor(2*e)/2%1!=0,s=Math.floor(e),n=0;n<s;n++)t.push("on");for(i&&t.push("half");t.length<5;)t.push("off");return t}}},h={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"star",class:this.starType},this._l(this.itemClasses,function(t,i){return e("span",{key:i,staticClass:"star-item",class:t})}))},staticRenderFns:[]};var d=i("VU/8")(f,h,!1,function(t){i("4uMW")},null,null).exports,p={name:"movie-item",components:{mStar:d},props:{mInfo:{type:Object}},computed:{getDirectors:function(){for(var t=[],e=0,i=this.mInfo.directors.length;e<i;e++)t.push(this.mInfo.directors[e].name);return t.join("/")},getArticles:function(){for(var t=[],e=0,i=this.mInfo.casts.length;e<i;e++)t.push(this.mInfo.casts[e].name);return t.join("/")}},methods:{setTitle:function(t){n.$emit("setTitle",t),n.$emit("backshow",!0)}}},_={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("li",{staticClass:"movie-item",on:{click:function(e){t.setTitle(t.mInfo.title)}}},[i("router-link",{staticClass:"fixed",attrs:{to:{name:"movieDetail",params:{id:t.mInfo.id}}}},[i("img",{staticClass:"poster",attrs:{src:t.mInfo.images.small,alt:""}}),t._v(" "),i("div",{staticClass:"info-wrap"},[i("div",{staticClass:"name"},[t._v(t._s(t.mInfo.title))]),t._v(" "),i("div",{staticClass:"star-wrap"},[i("m-star",{attrs:{size:"36",score:t.mInfo.rating.average}}),i("span",{staticClass:"score"},[t._v(t._s(t.mInfo.rating.average))])],1),t._v(" "),i("span",{staticClass:"director"},[t._v("导演："+t._s(t.getDirectors))]),t._v(" "),i("div",{staticClass:"artice"},[i("span",[t._v("主演：")]),i("p",[t._v(t._s(t.getArticles))])])])])],1)},staticRenderFns:[]};var g=i("VU/8")(p,_,!1,function(t){i("3L/v")},null,null).exports,C=i("Zrlr"),k=i.n(C),w=i("wxAW"),b=i.n(w),I=i("mtWM"),$=i.n(I),T="api",x=new(function(){function t(){k()(this,t),this.$http=$.a.create({baseURL:T})}return b()(t,[{key:"getHotlist",value:function(){return this.$http.get("/v2/movie/in_theaters")}},{key:"getToplist",value:function(t,e){return this.$http.get("/v2/movie/top250",{params:{star:t,count:e}})}},{key:"getMovieItem",value:function(t){return this.$http.get("/v2/movie/subject/"+t)}},{key:"getActor",value:function(t){return this.$http.get("/v2/movie/celebrity/"+t)}},{key:"searchMovie",value:function(t){return this.$http.get("/v2/movie/search?q="+t)}}]),t}()),y={name:"Loading",props:{end:{type:Boolean,default:!1}}},R={render:function(){var t=this.$createElement,e=this._self._c||t;return this.end?this._e():e("div",{staticClass:"loading"},[this._m(0)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"lds-css ng-scope",staticStyle:{width:"100px",height:"100px"}},[e("div",{staticClass:"lds-ripple",staticStyle:{width:"100%",height:"100%"}},[e("div"),this._v(" "),e("div")])])}]};var S=i("VU/8")(y,R,!1,function(t){i("w47w")},null,null).exports,j={name:"hotlist",components:{mItem:g,mLoading:S},data:function(){return{info:null,completed:!1}},created:function(){var t=this;x.getHotlist().then(function(e){t.info=e.data.subjects,t.completed=!0}).catch(function(t){console.log(t)})}},F={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("m-loading",{attrs:{end:this.completed}}),this._v(" "),e("ul",this._l(this.info,function(t,i){return e("m-item",{key:i,attrs:{"m-info":t}})}))],1)},staticRenderFns:[]};var L=i("VU/8")(j,F,!1,function(t){i("oFIZ")},null,null).exports,D={name:"rank",components:{mLoading:S},data:function(){return{completed:!1,toplist:null}},created:function(){var t=this;x.getToplist(0,9).then(function(e){t.toplist=e.data.subjects,t.completed=!0}).catch(function(t){console.log(t)})},methods:{setTitle:function(t){n.$emit("setTitle",t),n.$emit("backshow",!0)}}},E={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("m-loading",{attrs:{end:t.completed}}),t._v(" "),i("div",{staticClass:"rank-wrap"},[t._m(0),t._v(" "),i("ul",{staticClass:"movie-top-list fixed"},t._l(t.toplist,function(e,s){return i("li",{key:s,on:{click:function(i){t.setTitle(e.title)}}},[i("router-link",{attrs:{to:{name:"movieDetail",params:{id:e.id}}}},[i("div",{staticClass:"cover"},[i("img",{attrs:{src:e.images.small,alt:e.alt}}),t._v(" "),i("span",{staticClass:"badge"},[t._v(t._s(s+1))])]),t._v(" "),i("p",[t._v(t._s(e.title))])])],1)}))])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"rank-wrap-tips"},[this._v("top250"),e("a",{attrs:{href:"javascript:"}},[this._v("更多")])])}]};var V=i("VU/8")(D,E,!1,function(t){i("FNDx")},null,null).exports,N={name:"movieDetail",components:{mStar:d,mLoading:S},data:function(){return{completed:!1,movieInfo:null}},computed:{getDirectors:function(){for(var t=[],e=0,i=this.movieInfo.directors.length;e<i;e++)t.push(this.movieInfo.directors[e].name);return t.join("/")}},methods:{setHeader:function(t){n.$emit("setTitle",t),this.$root.backTitle=this.movieInfo.title}},beforeRouteLeave:function(t,e,i){"hotList"===t.name?(n.$emit("setTitle","正在热映"),n.$emit("backshow",!1)):"rank"===t.name?(n.$emit("setTitle","排行榜"),n.$emit("backshow",!1)):"actor"===t.name?n.$emit("setTitle",this.$root.backName):"search"===t.name&&(n.$emit("setTitle","搜索"),n.$emit("backshow",!1)),i()},created:function(){var t=this;x.getMovieItem(this.$route.params.id).then(function(e){t.movieInfo=e.data,t.completed=!0}).catch(function(t){console.log(t)})}},U={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("m-loading",{attrs:{end:t.completed}}),t._v(" "),t.movieInfo?i("div",[i("div",{staticClass:"m-top-poster"},[i("div",{staticClass:"cover"},[i("img",{attrs:{src:t.movieInfo.images.small,alt:""}})])]),t._v(" "),i("div",{staticClass:"movie-info-wrap fixed"},[i("div",{staticClass:"movie-info-l"},[i("div",{staticClass:"title"},[t._v(t._s(t.movieInfo.title))]),t._v(" "),i("div",{staticClass:"movie-info-item"},[t._v("\n\t\t\t\t\t\t"+t._s(t.movieInfo.year)+"/"+t._s(t.movieInfo.countries.join("/"))+"\n\t\t\t\t\t")]),t._v(" "),i("div",{staticClass:"movie-info-item"},[t._v("\n\t\t\t\t\t\t"+t._s(t.movieInfo.genres.join("/"))+"\n\t\t\t\t\t")]),t._v(" "),i("div",{staticClass:"movie-info-item"},[t._v("原名："+t._s(t.movieInfo.original_title))]),t._v(" "),i("div",{staticClass:"movie-info-item"},[t._v("导演："+t._s(t.getDirectors))])]),t._v(" "),i("div",{staticClass:"movie-info-r"},[i("div",{staticClass:"movie-score-wrap"},[i("div",{staticClass:"score"},[t._v("\n\t\t\t\t\t\t\t评分："),i("span",[t._v(" "+t._s(t.movieInfo.rating.average)+" ")])]),t._v(" "),i("m-star",{attrs:{size:"36",score:t.movieInfo.rating.average}}),t._v(" "),i("div",{staticClass:"person-num"},[t._v(t._s(t.movieInfo.ratings_count)+"人")])],1)])]),t._v(" "),i("div",{staticClass:"movie-btn-wrap fixed"},[i("div",{staticClass:"btn"},[t._v("想看（"+t._s(t.movieInfo.wish_count)+"）")]),t._v(" "),i("div",{staticClass:"btn"},[t._v("看过（"+t._s(t.movieInfo.collect_count)+"）")])]),t._v(" "),i("div",{staticClass:"movie-summary"},[i("div",{staticClass:"title"},[t._v("剧情简介：")]),t._v(" "),i("div",{staticClass:"main"},[t._v("\n\t\t\t\t\t"+t._s(t.movieInfo.summary)+"\n\t\t\t\t")])]),t._v(" "),i("div",{staticClass:"article-wrap"},t._l(t.movieInfo.casts,function(e,s){return i("div",{key:s,staticClass:"article",on:{click:function(i){t.setHeader(e.name)}}},[i("router-link",{attrs:{to:{name:"actor",params:{id:e.id}}}},[i("div",{staticClass:"article-head"},[i("img",{attrs:{src:e.avatars.small,alt:""}})]),t._v(" "),i("p",[t._v(t._s(e.name))])])],1)}))]):t._e()],1)},staticRenderFns:[]};var M=i("VU/8")(N,U,!1,function(t){i("hLsR")},null,null).exports,A={name:"actor",data:function(){return{complete:!1,artInfo:null}},components:{mLoading:S,mItem:g},beforeRouteLeave:function(t,e,i){"movieDetail"===t.name&&(n.$emit("setTitle",this.$root.backTitle),this.$root.backName=this.artInfo.name),i()},created:function(){var t=this;x.getActor(this.$route.params.id).then(function(e){t.artInfo=e.data,t.complete=!0})}},H={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("m-loading",{attrs:{end:t.complete}}),t._v(" "),t.artInfo?i("div",[i("div",{staticClass:"actor-wrap"},[i("img",{attrs:{src:t.artInfo.avatars.small,alt:""}}),t._v(" "),i("p",{staticClass:"tips"},[i("span",{staticClass:"name"},[t._v(t._s(t.artInfo.name))]),t._v(" "),i("span",{staticClass:"role"},[t._v(t._s(t.artInfo.gender)+" "+t._s(t.artInfo.born_place))])])]),t._v(" "),i("ul",t._l(t.artInfo.works,function(t,e){return i("m-item",{key:e,attrs:{"m-info":t.subject}})}))]):t._e()],1)},staticRenderFns:[]};var q=i("VU/8")(A,H,!1,function(t){i("Tf6v")},"data-v-c53c15fe",null).exports,z={name:"m-search",components:{mItem:g,mLoading:S},data:function(){return{complete:!1,info:null}},created:function(){var t=this;x.searchMovie(this.$route.query.q).then(function(e){t.complete=!0,t.info=e.data.subjects}).catch(function(t){console.log(t)})}},W={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("m-loading",{attrs:{end:this.complete}}),this._v(" "),e("ul",this._l(this.info,function(t,i){return e("m-item",{key:i,attrs:{"m-info":t}})}))],1)},staticRenderFns:[]},Z=i("VU/8")(z,W,!1,null,null,null).exports;s.a.use(u.a);var P=new u.a({routes:[{path:"/",redirect:"/hotlist"},{path:"/hotlist",name:"hotList",component:L},{path:"/rank",name:"rank",component:V},{path:"/movieDetail/:id",name:"movieDetail",component:M},{path:"/actor/:id",name:"actor",component:q},{path:"/search",name:"search",component:Z}]});i("DXmm"),i("xsZ7");s.a.config.productionTip=!1,new s.a({el:"#app",router:P,components:{App:v},template:"<App/>",data:function(){return{backtitle:"",backName:""}}})},NSg2:function(t,e){},Tf6v:function(t,e){},hLsR:function(t,e){},"jS+s":function(t,e){},oFIZ:function(t,e){},w47w:function(t,e){},xsZ7:function(t,e){},zQxV:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.cd69c5016432eb0a3ba9.js.map